<html><head>
	<title>title</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<link href='https://fonts.googleapis.com/css?family=Bungee' rel='stylesheet'>
		<link href='https://fonts.googleapis.com/css?family=Flamenco' rel='stylesheet'>
		<link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet"> 
		<link href='https://fonts.googleapis.com/css?family=Black Ops One' rel='stylesheet'>
		<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"/>
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src='https://cdn.firebase.com/js/client/2.4.0/firebase.js'></script>
<script src="https://www.gstatic.com/firebasejs/4.9.0/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.9.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.9.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.9.0/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.9.0/firebase-messaging.js"></script>


		<style>


		body{
			font-family: 'Bungee';
			padding: 10px;

		}
		
		.msg{
			margin: 10px 0;
			padding: 10px;
			width: 400px;
			background-color: #FFc82A;
			overflow: auto;


		}
		.j{
			font-family: 'Roboto Slab';
			font-size: 17px;
		}
		#text{
			margin: 5px 0px;
		}
		#post{
			padding: 0.5em 1em;
			background-color: #50b1ff;
			border: none;
			color:#FFF;
		}

		</style>

	</head>
	<body>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDsRoO6o1oAEdLtobMiMoO8apc4SqQig2k",
    authDomain: "fir-example-ef56e.firebaseapp.com",
    databaseURL: "https://fir-example-ef56e.firebaseio.com",
    projectId: "fir-example-ef56e",
    storageBucket: "fir-example-ef56e.appspot.com",
    messagingSenderId: "529395661675"
  };
  firebase.initializeApp(config);

</script>
<script type="text/javascript">
	$(document).ready(function(){
		var myFireBase = new Firebase("https://fir-example-ef56e.firebaseio.com/message");
		var username = null;
		$("#button1").hide();
		$("#mssg").hide();
		$("#results").hide();
		var provider = new firebase.auth.GoogleAuthProvider();
		$("#log1").click(function(){
			
			firebase.auth().signInWithPopup(provider).then(function(result){
				var token = result.credential.accessToken;
				var user = result.user;
				console.log(user);
				username = user.displayName;
				$("#log1").html("Logged in as "+user.displayName);
				$("#button1").show();
		$("#mssg").show();
		$("#results").show();
			}).catch(function(error){
				var errorcode = error.code;
				var email = error.email;
			});

		});

		


		$("#button1").click(function(){

			
			var tex = $("#mssg").val();
			var len = tex.length;
			
			if(tex!=0){
			myFireBase.push({name:username, text:tex});
			$("#mssg").val(" ");
			}
			else{
				alert("Enter something");
			}

		});


		function startListening(){
			console.log("hello");
			 myFireBase.on('child_added', function(snapshot) {
        var msg = snapshot.val();
      
        
        
        var msgTextElement = document.createElement("p");
        msgTextElement.textContent = msg.text;
        var msgUser = document.createElement("b");
        msgUser.textContent=msg.name;
  
        var msgElement = document.createElement("div");
        msgElement.appendChild(msgUser);
        var br = document.createElement("br");
        msgTextElement.appendChild(br);
        msgElement.appendChild(msgTextElement);
        msgElement.className = "msg";
        msgTextElement.className = "j";
        

        document.getElementById("results").appendChild(msgElement);
      });
		}
		

		startListening();

});
</script>
	<textarea  class="form-control" id = "mssg" rows="5" maxlength="150" style="width:600px;font-family:'Roboto Slab';" placeholder="Message"></textarea>
	<br>
	
	<button id="log1" class="btn btn-danger">Login with Google</button>
<button id="button1" class="btn btn-primary">Post</button>
<div id="results">
	
</div>


	</body>
</html>